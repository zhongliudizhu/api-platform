@startuml
skinparam backgroundColor #AAFFFF
(*) --> if "活动表是否存在该用户？" then
--> [true] "该用户在活动表"
	if "该用户活动是否过期？" then
	--> [true] "该用户活动过期"
		--> [返回值和操作] "更新活动状态，活动过期(1)和活动截至日期"
	else
	--> [false] "该用户活动未过期"
		if "该用户是否已经参与了该活动？" then
		--> [true] "该用户已参与了该活动"
			--> [返回值和操作] "更新活动状态，已参与活动状态(2)和活动截至日期"
		else
		--> [false] "该用户未参与该活动"
			--> [返回值和操作] "更新活动状态，未参与活动状态(0)和活动截至日期"
		endif
	endif
else
--> [false] "用户不在活动表"
	if "判断该用户是否有参与活动的资格？" then
	--> [true] "该用户有资格"
		--> [返回值和操作] "新增该用户活动，返回未参与活动状态(0)和活动截至日期"
	else
	--> [false] "该用户没资格"
		--> [返回值和操作] "返回用户没有资格的活动状态(3)"
	endif
endif
@enduml